name: mcp_test_manager
class_name: MultiAgentManager
description: "Generic MCP test manager (planner-driven) for iterating on MCP tool calls."
max_cycles: 20

role_bindings:
  delegator: shared::delegator

agents:
  - name: shared::delegator
    class: Delegator
  - name: mcp_test::planner
    class: Planner
  - name: shared::tool_arguments
    class: ToolArguments
  - name: shared::final_answer
    class: FinalAnswer

control_nodes:
  - name: tool_caller
    class: ToolCaller
  - name: tool_result_handler
    class: ToolResultHandler
  - name: flow_exit_node
    class: FlowExitNode
  - name: manager_exit_node
    class: ManagerExitNode

tools:
  # Keep this manager safe and focused. Add/remove MCP tools here as you try new servers.
  allowed_tools:
    # Time (official) hello-world MCP
    - mcp::io.modelcontextprotocol/time::get_current_time

    # GitHub (mcp-github, PyPI) - read-only allowlisted tools
    - mcp::pypi/mcp-github::search_users
    - mcp::pypi/mcp-github::search_repositories
  except_tools: []

flow_config:
  state_map:
    "shared::delegator": "mcp_test::planner"
    "shared::tool_arguments": "tool_caller"
    "tool_caller": "tool_result_handler"
    "tool_result_handler": "mcp_test::planner"
    "mcp_test::planner_flow_exit_node": "shared::final_answer"
    "shared::final_answer": "manager_exit_node"

